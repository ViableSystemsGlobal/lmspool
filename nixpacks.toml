[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = ["npm ci"]

[phases.build]
cmds = [
  "npm ci",
  "echo '=== Checking node_modules ==='",
  "ls -la node_modules | head -20",
  "test -d node_modules/tailwindcss && echo 'âœ“ tailwindcss found' || (echo 'âœ— tailwindcss NOT found!' && npm list tailwindcss 2>&1 || true)",
  "test -d node_modules/postcss && echo 'âœ“ postcss found' || (echo 'âœ— postcss NOT found!' && npm list postcss 2>&1 || true)",
  "echo '=== Running build ==='",
  "npx prisma generate",
  "npm run build 2>&1 | head -100"
]

[start]
cmd = "npm run start"

